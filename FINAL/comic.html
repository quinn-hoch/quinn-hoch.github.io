<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Flipbook</title>
<link rel="stylesheet" href="theStyle.css"> 
<style>
    body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background: #f2f2f2;
        font-family: sans-serif;
    }
    
</style>
</head>

<body>

<div id="flipbook"></div>

<div id="controls">
    <button class="nextback" onclick="prevPage()">Prev</button>
    <button class="nextback" onclick="nextPage()">Next</button>
</div>

<script>

const imagePaths = [
    "images/page1.jpg",
    "images/page2.jpg",
    "images/page3.jpg",
    "images/page4.jpg",
    "images/page5.jpg",
    "images/page6.jpg",
    "images/page7.jpg",
    "images/page8.jpg",
    "images/page9.jpg",
    "images/page10.jpg"
];

const buttons = [
    { page: 1, x:205,  y: 70, text: "what's this?", url: "first.html" },
    { page: 3, x: 130, y: 438, text: "a", url: "words.html" },
    { page: 5, x: 10, y: 407, text: "b", url: "phone.html" },
   { page: 6, x: 35, y: 120, text: "what are you doing on your phone?", url: "words.html" },
   { page: 6, x: 290, y: 255, text: "c", url: "girlf.html" },
   { page: 7, x: 1, y: 25, text: "d", url: "thisguy.html" },
    { page: 7, x: 1, y: 410, text: "e", url: "books.html" }
];

const flipbook = document.getElementById("flipbook");
let currentPage = 0;
let pages = [];

function createFlipbook() {
    imagePaths.forEach((src, index) => {
        const page = document.createElement("div");
        page.className = "page";
        page.style.zIndex = imagePaths.length - index;
        page.style.backgroundImage = `url(${src})`;

        flipbook.appendChild(page);
        pages.push(page);

        buttons
            .filter(b => b.page === index)
            .forEach(b => {
                const btn = document.createElement("div");
                btn.className = "hotspot-btn";
                btn.innerText = b.text;
                btn.style.left = b.x + "px";
                btn.style.top  = b.y + "px";
                btn.onclick = () => window.location.href = b.url;
                page.appendChild(btn);
            });
    });
}

function nextPage() {
    if (currentPage < pages.length) {
        pages[currentPage].classList.add("flipped");
        currentPage++;
    } else {
        pages.forEach(p => p.classList.remove("flipped"));
        currentPage = 0;
    }
}

function prevPage() {
    if (currentPage > 0) {
        currentPage--;
        pages[currentPage].classList.remove("flipped");
    } else {
        pages.forEach(p => p.classList.add("flipped"));
        currentPage = pages.length;
    }
}

createFlipbook();

function getStartPage() {
    const params = new URLSearchParams(window.location.search);
    const page = parseInt(params.get("page"));
    return isNaN(page) ? 0 : page;
}

const startPage = getStartPage();
for (let i = 0; i < startPage; i++) {
    nextPage();
}

</script>

</body>
</html>
